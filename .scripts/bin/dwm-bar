#!/bin/sh
export SEP="|"
export IDENTIFIER="unicode"
# status modules #
dwm_pulse () {
    VOL=$(pamixer --get-volume-human | tr -d '%')
 
    printf "%s"  "$SEP"
    if [ "$IDENTIFIER" = "unicode" ]; then
        if [ "$VOL" = "muted" ] || [ "$VOL" -eq 0 ]; then
            printf "üîá"
        elif [ "$VOL" -gt 0 ] && [ "$VOL" -le 33 ]; then
            printf "üîà %s%%" "$VOL"
        elif [ "$VOL" -gt 33 ] && [ "$VOL" -le 66 ]; then
            printf "üîâ %s%%" "$VOL"
        else
            printf "üîä %s%%" "$VOL"
        fi
   else
       if [ "$VOL" = "muted" ] || [ "$VOL" -eq 0 ]; then
           printf "MUTE"
       elif [ "$VOL" -gt 0 ] && [ "$VOL" -le 33 ]; then
           printf "VOL %s%%" "$VOL"
       elif [ "$VOL" -gt 33 ] && [ "$VOL" -le 66 ]; then
           printf "VOL %s%%" "$VOL"
       else
           printf "VOL %s%%" "$VOL"
       fi
    fi
    printf "%s\n" #"$SEP"#
}

dwm_weather() {
         LOCATION=city

         printf "%s" "$SEP"
         if [ "$IDENTIFIER" = "unicode"  ]; then
            printf "%s" "$(curl -s wttr.in/22485?format=1)"
         else
            printf "WEA%s" "$(curl -s wttr.in/22485?format=1 | grep -o "[0-9].*")"
         fi
            printf "%s\n" #"$SEP"#
                                                  
}


dwm_battery () {
    CHARGE=$(cat /sys/class/power_supply/BAT0/capacity)
    STATUS=$(cat /sys/class/power_supply/BAT0/status)

    printf "%s" "$SEP"
    if [ "$IDENTIFIER" = "unicode" ]; then
        if [ "$STATUS" = "Charging" ]; then
            printf "üîå%s%% %s" "$CHARGE" "$STATUS"
        else
            printf "üîã%s%% %s" "$CHARGE" "$STATUS"
        fi
    else
        printf "BAT %s%% %s" "$CHARGE" "$STATUS"
    fi
    printf "%s\n" #"$SEP"#
}


dwm_date () {
    printf "%s" "$SEP"
    if [ "$IDENTIFIER" = "unicode" ]; then
        printf "üìÜ%s" "$(date "+%a üìÖ%m/%d|‚è∞%l:%M%P")"
    else
        printf "DAT%s" "$(date "+%a üìÖ%m/%d|‚è∞%l:%M%P")"
    fi
    printf "%s\n" #"$SEP"#
}
# module order #
while true
do
    xsetroot -name "$(dwm_pulse)$(dwm_battery)$(dwm_date)"
done
